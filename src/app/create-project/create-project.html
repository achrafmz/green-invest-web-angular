<!-- Header identique au dashboard -->
<div class="dashboard-header">
  <div class="user-info">
    <div class="avatar">{{ userName.charAt(0).toUpperCase() }}</div>
    <div>
      <div class="greeting">Bonjour, {{ userName }}</div>
      <div class="role">Porteur de projet</div>
    </div>
  </div>
  <button class="btn-logout" (click)="logout()">
    <span class="material-icons">logout</span>
    Déconnexion
  </button>
</div>

<div class="create-project-container">
  <h1>Créer un projet</h1>

  <form [formGroup]="projectForm" (ngSubmit)="onSubmit()" class="project-form">

    <!-- Titre -->
    <div class="form-group">
      <label for="title">Titre du projet</label>
      <input 
        type="text" 
        id="title" 
        formControlName="title"
        placeholder="Ex: Parc solaire communautaire"
        required>
      <div *ngIf="projectForm.get('title')?.invalid && projectForm.get('title')?.touched" class="error">
        Ce champ est requis.
      </div>
    </div>

    <!-- Description -->
    <div class="form-group">
      <label for="description">Description</label>
      <textarea 
        id="description" 
        formControlName="description"
        placeholder="Décrivez votre projet..."
        rows="4"
        required></textarea>
      <div *ngIf="projectForm.get('description')?.invalid && projectForm.get('description')?.touched" class="error">
        La description est requise.
      </div>
    </div>

    <!-- Budget -->
    <div class="form-group">
      <label for="budget">Budget nécessaire (MAD)</label>
      <input 
        type="number" 
        id="budget" 
        formControlName="budget"
        placeholder="100000"
        min="1"
        required>
      <div *ngIf="projectForm.get('budget')?.invalid && projectForm.get('budget')?.touched" class="error">
        Veuillez entrer un budget valide.
      </div>
    </div>

    <!-- Localisation -->
    <div class="form-group">
      <label for="location">Localisation</label>
      <input 
        type="text" 
        id="location" 
        formControlName="location"
        placeholder="Ex: Boulemane, Maroc"
        required>
      <div *ngIf="projectForm.get('location')?.invalid && projectForm.get('location')?.touched" class="error">
        La localisation est requise.
      </div>
    </div>

    <!-- Type d'énergie -->
    <div class="form-group">
      <label for="energyType">Type d'énergie</label>
      <select id="energyType" formControlName="energyType" required>
        <option value="" disabled selected>Choisissez un type</option>
        <option value="solaire">Solaire</option>
        <option value="éolien">Éolien</option>
        <option value="biomasse">Biomasse</option>
        <option value="hydraulique">Hydraulique</option>
      </select>
      <div *ngIf="projectForm.get('energyType')?.invalid && projectForm.get('energyType')?.touched" class="error">
        Veuillez choisir un type.
      </div>
    </div>

    <!-- Boutons -->
    <div class="form-actions">
      <button type="button" class="btn-cancel" (click)="cancel()">Annuler</button>
      <button type="submit" class="btn-submit" [disabled]="projectForm.invalid">
        Soumettre le projet
      </button>
    </div>
  </form>

  <!-- Popup de succès -->
  <div *ngIf="showSuccess" class="success-popup">
    <div class="popup-content">
      <div class="check-icon">✓</div>
      <h3>Projet soumis avec succès !</h3>
      <p>Votre projet est en attente de validation.</p>
    </div>
  </div>
</div>